import{_ as e,a as l,c as a,d as t,e as n,r as i,p as o,A as s,o as c,m as r,f as d,w as u,b as p,l as m,h as f,j as v,t as b,H as g,F as y,n as _,g as w,i as h,$ as k,E as R,B as T,a0 as q,a1 as A,a2 as N,a3 as j,O as C,a4 as P,a5 as U,s as B,a6 as F,C as x,D as I}from"./index-2f04f48a.js";import{F as S}from"./FullLoading-b5f95455.js";import{u as D}from"./IT-request-b6cf1799.js";import{P as O}from"./pen-e2b921ca.js";import{T as V}from"./TopTitle-b8bb271e.js";import{F as $}from"./file-bd814139.js";import{h as E,v as W}from"./useValidate-1451d16f.js";import{U as z}from"./UploadFiles-83764077.js";import"./loading-cc64260e.js";const K=e({},[["render",function(e,i){const o=l("font-awesome-icon");return a(),t("div",null,[n(o,{icon:"fa-solid fa-check"})])}],["__file","C:/Program Files/Workspace/it-req-fe/src/icons/common/check.vue"]]);const L=e({},[["render",function(e,i){const o=l("font-awesome-icon");return a(),t("div",null,[n(o,{icon:"fa-solid fa-xmark"})])}],["__file","C:/Program Files/Workspace/it-req-fe/src/icons/common/cancel.vue"]]);const M=e({},[["render",function(e,i){const o=l("font-awesome-icon");return a(),t("div",null,[n(o,{icon:"fa-solid fa-arrow-up-from-bracket"})])}],["__file","C:/Program Files/Workspace/it-req-fe/src/icons/common/upload.vue"]]);const Y=e({},[["render",function(e,i){const o=l("font-awesome-icon");return a(),t("div",null,[n(o,{icon:"fa-solid fa-calendar-days"})])}],["__file","C:/Program Files/Workspace/it-req-fe/src/icons/common/calendar.vue"]]),G={class:"mr-3"},H=["href","download"],J={class:"ce-dialog-footer-btn"},Q=e({__name:"ApproveBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const q=e,A=i({}),N=i(!1),j=i(""),C=o(),P=s().params.reqNo,U=`https://it-req-node.onrender.com/uploads/${P}`,B=i({}),F=i({}),x=i(!1),I=i(!1),S=async()=>{F.value.reviewerReply.result="Approved",x.value=!0,setTimeout((async()=>{await k(P,F.value).then((()=>{R.success(m("Approve evidence successfully")),C.push("/reload")}))}),2e3)},O=async()=>{T.prompt(m("Please leave a reason for rejection"),m("Reject evidence"),{confirmButtonText:m("Submit"),cancelButtonText:m("Cancel"),inputPlaceholder:m("Please leave a reason for rejection"),inputType:"textArea",buttonSize:"small"}).then((({value:e,action:l})=>{F.value.reviewerReply.result="Rejected",F.value.reviewerReply.comments=e,x.value=!0,setTimeout((async()=>{await k(P,F.value).then((()=>{x.value=!1,R.success(m("Reject evidence successfully")),C.push("/reload")}))}),2e3)})).catch((()=>{R({type:"info",message:m("Action cancelled")})}))};return c((()=>A.value=D())),r(A,(async()=>{N.value=await A.value.getPermission.approve,j.value=await A.value.getSimpleStep;const e=await A.value.getEvidence,l=new Date;j.value.length&&E(e)&&"Done"!==j.value&&"Cancel"!==j.value&&(B.value={updateDate:e[j.value].updateDate,uploadFiles:Object.assign({},e[j.value].uploadFiles)},F.value={step:j.value,reviewerReply:{reviewDate:l}})})),(e,i)=>{const o=l("el-button"),s=l("el-tooltip"),c=l("el-descriptions-item"),r=l("el-descriptions"),k=l("el-dialog");return a(),t("span",G,[d(" Approve button "),n(s,{content:p(m)(q.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:q.icon,plain:"",circle:"",type:"success",disabled:!p(N),onClick:i[0]||(i[0]=e=>I.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),d(" Approve evidence dialog "),n(k,{modelValue:p(I),"onUpdate:modelValue":i[1]||(i[1]=e=>h(I)?I.value=e:null),title:p(m)("Approve evidence"),width:"500px"},{default:u((()=>[p(E)(p(B))?(a(),f(r,{key:0,id:"uApprove-table",column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Upload date")},{default:u((()=>[v(b(p(g)(p(B).updateDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Evidence")},{default:u((()=>[(a(!0),t(y,null,_(p(B).uploadFiles,((e,l)=>(a(),t("div",{key:l},[w("a",{class:"ce-link",target:"_blank",href:`${U}/${p(j)}/${e.fileName}`,download:e.originalName},[n(p($),{class:"mr-1"}),v(" "+b(e.originalName),1)],8,H)])))),128))])),_:1},8,["label"])])),_:1})):d("v-if",!0),d(" Submit button (Reject / Approve) "),w("div",J,[n(o,{loading:p(x),onClick:O},{default:u((()=>[v(b(p(m)("Reject")),1)])),_:1},8,["loading"]),n(o,{type:"primary",loading:p(x),onClick:S},{default:u((()=>[v(b(p(m)("Approve")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-04e068cc"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/ApproveBtn.vue"]]),X={class:"mr-1"},Z={class:"ce-dialog-footer-btn"},ee=e({__name:"CancelBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const f=i({}),y=i(!1),_=s().params.reqNo,k=i(!1),A=o(),N=i(!1),j=e,C=i({applyDate:new Date,applicantName:"",applicantId:"",reason:""}),P=async()=>{T.confirm(m("Are you sure to cancel this request? This action cannot be undone"),"",{confirmButtonText:m("OK"),cancelButtonText:m("Cancel"),type:"warning"}).then((async()=>{k.value=!0,await q(_,C.value).then((e=>{if(k.value=!1,200===e.code)R.success(m("Apply for cancellation successfully"));else R.error(m("Failed to apply for cancellation"));A.push("/reload")}))})).catch((()=>{R.info(m("Action cancelled"))}))};return c((()=>f.value=D())),r(f,(async e=>{const l=await f.value.getApplicant;y.value=await f.value.getPermission.cancel,E(l)&&(C.value.applicantName=l[0],C.value.applicantId=l[1])})),(e,i)=>{const o=l("el-button"),s=l("el-tooltip"),c=l("el-descriptions-item"),r=l("el-input"),f=l("el-descriptions"),_=l("el-dialog");return a(),t("span",X,[d(" Cancel button "),n(s,{content:p(m)(j.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:j.icon,plain:"",circle:"",type:"danger",disabled:!p(y),onClick:i[0]||(i[0]=e=>N.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),n(_,{modelValue:p(N),"onUpdate:modelValue":i[2]||(i[2]=e=>h(N)?N.value=e:null),title:p(m)("Cancel this IT-request"),width:"450px"},{default:u((()=>[n(f,{id:"cancellation-table",column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Application date")},{default:u((()=>[v(b(p(g)(p(C).applyDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Applicant")},{default:u((()=>[v(b(p(C).applicantName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Reason")},{default:u((()=>[n(r,{modelValue:p(C).reason,"onUpdate:modelValue":i[1]||(i[1]=e=>p(C).reason=e),type:"textarea",placeholder:p(m)("Please leave the reason for cancellation here")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),w("div",Z,[n(o,{type:"primary",loading:p(k),onClick:P},{default:u((()=>[v(b(p(m)("Submit")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/CancelBtn.vue"]]),le={class:"mr-3"},ae={class:"ce-dialog-footer-btn"},te=e({__name:"EvidenceBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const f=e,g=i({}),y=o(),_=i(!1),k=s().params.reqNo,T=i(""),q=i(!1),C=A(""),P=i([]),U=i(!1),B=async e=>{P.value=Object.assign([],e)},F=async()=>{q.value=!0;let e=[];if(!P.value.length)return R.info(m("No files selected")),q.value=!1;{const l=new FormData;for await(const e of P.value)l.append("files",e.raw);const a=await N(l,k,T.value);e=Object.assign([],a.data)}if(e.length){let l=[];e.forEach((e=>{const{fileName:a,originalName:t}=e;l.push({fileName:a,originalName:t})}));const a={step:T.value,updateDate:new Date,uploadFiles:l};await j(k,a).then((()=>{setTimeout((()=>{R.success(m("Upload to server successfully")),y.push("/reload")}),1500)})).catch((()=>{R.error(m("Failed to upload files")),q.value=!1}))}else q.value=!1};return c((()=>g.value=D())),r(g,(async e=>{_.value=await g.value.getPermission.evidence,T.value=await g.value.getSimpleStep,C.value=await g.value.getReqType})),(e,i)=>{const o=l("el-button"),s=l("el-tooltip"),c=l("el-dialog");return a(),t("span",le,[d(" Upload evidence button "),n(s,{content:p(m)(f.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:f.icon,plain:"",circle:"",type:"primary",disabled:!p(_),onClick:i[0]||(i[0]=e=>U.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),d(" Upload evidence dialog "),n(c,{modelValue:p(U),"onUpdate:modelValue":i[1]||(i[1]=e=>h(U)?U.value=e:null),title:p(m)("Upload evidence"),width:"400px"},{default:u((()=>[n(p(z),{size:"large",plain:false,step:p(T),onGetChildren:B},null,8,["step"]),w("div",ae,[n(o,{type:"primary",disabled:p(q),onClick:F},{default:u((()=>[v(b(p(m)("Upload to server")),1)])),_:1},8,["disabled"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/EvidenceBtn.vue"]]),ne={class:"mr-3"},ie={key:0,class:"ce-validate p-1"},oe={class:"ce-dialog-footer-btn"},se=e({__name:"PostponeBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const f=i({}),y=i(!1),_=o(),k=s().params.reqNo,T=D().getReqType,q=i(!1),A=i(!1),N=i([]);let j=C({UAT1:null,UAT2:null,release:null,monitor:null});const U=e;c((()=>f.value=D())),r(f,(async e=>{const l=await f.value.getSchedule;if(y.value=await f.value.getPermission.postpone,E(l)){for(;N.value.length;)N.value.pop();for(const[e,a]of Object.entries(l)){if(("release"===e||"monitor"===e)&&!l[e])break;N.value.push({stage:e,title:a.title,exp:a.exp.new?g(a.exp.new):"undefined",rescheduling:a.exp.old.length,state:a.state}),j[e]=g(a.exp.new)}}}));let B=C({UAT1:"",UAT2:"",release:"",monitor:""});const F={Proceeding:{disabled:!1,placeholder:"Pick a date"},Reviewing:{disabled:!1,placeholder:"Pick a date"},Cancel:{disabled:!0,placeholder:"Item has been closed"},Done:{disabled:!0,placeholder:"Item has been closed"},Rejected:{disabled:!1,placeholder:"Pick a date"}},x=async()=>{if(j.UAT1||j.UAT2||j.release||j.monitor){let e={UAT1:g(j.UAT1),UAT2:g(j.UAT2),release:g(j.release),monitor:g(j.monitor)};if(B.UAT2=W(e.UAT1,e.UAT2,"UAT1","UAT2"),B.release="Project"===T?W(e.UAT2,e.release,"UAT2","Release"):"",B.monitor="Project"===T?W(e.release,e.monitor,"release","Monitor 1 lot"):"",!B.UAT2.length&&!B.release.length&&!B.monitor.length){const l=f.value.getReqType,a=Object.assign({type:l},e);q.value=!0,setTimeout((async()=>{await P(k,a).then((e=>{if(q.value=!1,200===e.code)R.success(m("Reschedule successfully")),_.push("/reload");else R.error(m("Failed to reschedule")),j={UAT1:"",UAT2:"",release:"",monitor:""}}))}),2e3)}}else R.warning(m("Please fill in this field")),B={UAT1:"",UAT2:"",release:"",monitor:""}};return(e,i)=>{const o=l("el-button"),s=l("el-tooltip"),c=l("el-table-column"),r=l("el-date-picker"),f=l("el-table"),g=l("el-dialog");return a(),t("span",ne,[n(s,{content:p(m)(U.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:U.icon,plain:"",circle:"",type:"warning",disabled:!p(y),onClick:i[0]||(i[0]=e=>A.value=!0)},null,8,["icon","disabled"])])),_:1},8,["content"]),n(g,{modelValue:p(A),"onUpdate:modelValue":i[1]||(i[1]=e=>h(A)?A.value=e:null),title:p(m)("Re-schedule"),width:"500"},{default:u((()=>[n(f,{id:"postpone-table",data:p(N)},{default:u((()=>[n(c,{align:"center",prop:"title",width:"135"}),n(c,{align:"center",prop:"exp",label:p(m)("Expect date"),width:"95"},null,8,["label"]),n(c,{align:"center",prop:"rescheduling",label:p(m)("Rescheduling times"),width:"100"},null,8,["label"]),n(c,{align:"center",label:`${p(m)("Postpone to")}...`},{default:u((e=>[n(r,{modelValue:p(j)[e.row.stage],"onUpdate:modelValue":l=>p(j)[e.row.stage]=l,type:"date",size:"small",format:"YYYY/MM/DD",placeholder:p(m)(F[e.row.state].placeholder),disabled:F[e.row.state].disabled,clearable:!1,editable:!1},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),""!==p(B)[e.row.stage]?(a(),t("div",ie,b(p(m)(p(B)[e.row.stage])),1)):d("v-if",!0)])),_:1},8,["label"])])),_:1},8,["data"]),w("div",oe,[n(o,{type:"primary",loading:p(q),onClick:x},{default:u((()=>[v(b(p(m)("Submit")),1)])),_:1},8,["loading"])])])),_:1},8,["modelValue","title"])])}}},[["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/PostponeBtn.vue"]]),ce={class:"mr-3"},re=e({__name:"RevNewBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const f=e,v=i({}),b=i(!1),g=o(),y=s().params.reqNo,_=()=>g.push({path:`/review/new/${y}`,replace:!0});return c((()=>v.value=D())),r(v,(async()=>b.value=await v.value.getPermission.revNew)),(e,i)=>{const o=l("el-button"),s=l("el-tooltip");return a(),t("span",ce,[d(" Review new request button "),n(s,{content:p(m)(f.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:f.icon,plain:"",circle:"",type:"success",disabled:!p(b),onClick:_},null,8,["icon","disabled"])])),_:1},8,["content"])])}}},[["__scopeId","data-v-2a158b24"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/RevNewBtn.vue"]]),de={class:"mr-3"},ue=e({__name:"EditNewBtn",props:{icon:{type:Object,required:!0},tip:{type:String,required:!0}},setup(e){const f=e,v=i({}),b=i(!1),g=o(),y=s().params.reqNo,_=()=>g.push({path:`/edit/${y}`,replace:!0});return c((()=>v.value=D())),r(v,(async e=>b.value=await v.value.getPermission.editNew)),(e,i)=>{const o=l("el-button"),s=l("el-tooltip");return a(),t("span",de,[d(" Edit new request button "),n(s,{content:p(m)(f.tip),placement:"bottom",effect:"dark"},{default:u((()=>[n(o,{icon:f.icon,plain:"",circle:"",type:"primary",disabled:!p(b),onClick:_},null,8,["icon","disabled"])])),_:1},8,["content"])])}}},[["__scopeId","data-v-42a2b791"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/fnBtns/EditNewBtn.vue"]]),pe=e({__name:"TopButtons",setup(e){const l=`IT-Request #${s().params.reqNo}`,t=D().getReqStatus,i=["Reviewing","Rejected","Returned"],o={tip:{approve:"Approve evidence",upload:"Upload evidence",postpone:"Reschedule",cancel:"Cancel this IT-Request",revNew:"Approve this IT-Request",editNew:"Edit this IT-Request"},icon:{approve:K,upload:M,postpone:Y,cancel:L,revNew:K,editNew:O}};return(e,s)=>(a(),f(p(V),null,U({title:u((()=>[v(b(l))])),_:2},[i.includes(p(t))?{name:"align-right",fn:u((()=>[n(p(re),{icon:o.icon.revNew,tip:o.tip.revNew},null,8,["icon","tip"]),n(p(ue),{icon:o.icon.editNew,tip:o.tip.editNew},null,8,["icon","tip"])])),key:"1"}:{name:"align-right",fn:u((()=>[n(p(Q),{icon:o.icon.approve,tip:o.tip.approve},null,8,["icon","tip"]),n(p(te),{icon:o.icon.upload,tip:o.tip.upload},null,8,["icon","tip"]),n(p(se),{icon:o.icon.postpone,tip:o.tip.postpone},null,8,["icon","tip"]),n(p(ee),{icon:o.icon.cancel,tip:o.tip.cancel},null,8,["icon","tip"])])),key:"0"}]),1024))}},[["__scopeId","data-v-98d658fe"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/TopButtons.vue"]]),me={class:"detail-collapse"},fe={key:0,class:"m-2 multiple-el-descriptions"},ve={key:1,class:"ce-gray-color-italic"},be={key:0},ge={key:1,class:"ce-gray-color-italic"},ye={key:0,class:"ce-gray-color-italic"},_e={key:1},we=e({__name:"BasicInfoBlock",setup(e){const o=D(),s=i({}),r=C({Done:"success",Cancel:"info",Proceeding:"primary",Rejected:"danger",Returned:"warning",Reviewing:"warning"});return c((()=>s.value=o.getBasicInfo)),(e,i)=>{const o=l("font-awesome-icon"),c=l("el-descriptions-item"),_=l("el-tag"),h=l("el-descriptions"),k=l("el-collapse-item");return a(),t(y,null,[d(" basic information block "),n(k,{name:"1"},{title:u((()=>[w("div",me,[n(o,{icon:"fa-solid fa-thumbtack"}),v(" "+b(p(m)("Basic Info")),1)])])),default:u((()=>[p(E)(p(s))?(a(),t("div",fe,[n(h,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("IT #")},{default:u((()=>[v(b(p(s).reqNo),1)])),_:1},8,["label"]),n(c,{label:p(m)("Type")},{default:u((()=>[p(s).type?(a(),f(_,{key:0,size:"small"},{default:u((()=>[v(b(p(s).type),1)])),_:1})):(a(),t("span",ve,"N/A"))])),_:1},8,["label"]),n(c,{label:p(m)("Request name")},{default:u((()=>[v(b(p(s).reqName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Status")},{default:u((()=>[n(_,{size:"small",type:p(r)[p(s).status]},{default:u((()=>[v(b(p(s).status),1)])),_:1},8,["type"])])),_:1},8,["label"]),n(c,{label:p(m)("Requester")},{default:u((()=>[v(b(p(s).reqrName),1)])),_:1},8,["label"]),n(c,{label:p(m)("IT")},{default:u((()=>[v(b(p(s).pgrName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Issue date")},{default:u((()=>[v(b(p(g)(p(s).issueDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Review date")},{default:u((()=>[p(s).review.date?(a(),t("span",be,b(p(g)(p(s).review.date)),1)):(a(),t("span",ge,"N/A"))])),_:1},8,["label"]),n(c,{label:p(m)("Lead time (day)")},{default:u((()=>[p(s).leadTime<0?(a(),t("span",ye,"N/A")):(a(),t("span",_e,b(p(s).leadTime),1))])),_:1},8,["label"]),n(c,{label:p(m)("Review duration (day)")},{default:u((()=>[v(b(p(s).reviewDuration),1)])),_:1},8,["label"])])),_:1}),n(h,{column:"1",border:""},{default:u((()=>["Rejected"===p(s).status||"Returned"===p(s).status?(a(),f(c,{key:0,label:p(m)("Review comments")},{default:u((()=>[v(b(p(s).approveComments),1)])),_:1},8,["label"])):d("v-if",!0)])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/BasicInfoBlock.vue"]]),he={class:"detail-collapse"},ke={key:0,class:"m-2 multiple-el-descriptions"},Re={key:0,class:"ce-gray-color-italic"},Te={key:1},qe=["href","download"],Ae={class:"inline-flex"},Ne={key:0},je=["src"],Ce=e({__name:"ScopeBlock",setup(e){const o=D(),s=o.getReqNo,f="https://it-req-node.onrender.com/uploads/attached_files/",g=["jpg","jpeg","gif","png","svg"],h=i({}),k=C([]);return c((()=>h.value=o.getScope)),r(h,(()=>{if(E(h.value))for(const[e,l]of Object.entries(h.value.attachedFiles)){const e=Object.assign({},l),{originalName:a}=l;let t=a.split(".").slice(-1)[0];e.ext=t,k.push(e)}})),(e,i)=>{const o=l("font-awesome-icon"),c=l("el-descriptions-item"),r=l("el-descriptions"),R=l("el-collapse-item");return a(),t(y,null,[d(" Scope block "),n(R,{name:"3"},{title:u((()=>[w("div",he,[n(o,{icon:"fa-solid fa-thumbtack"}),v(" "+b(p(m)("Scope")),1)])])),default:u((()=>[p(E)(p(h))?(a(),t("div",ke,[n(r,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("Plant")},{default:u((()=>[v(b(p(h).plant),1)])),_:1},8,["label"]),n(c,{label:p(m)("Device")},{default:u((()=>[v(b(p(h).device),1)])),_:1},8,["label"]),n(c,{label:p(m)("Stage")},{default:u((()=>[v(b(p(h).stage),1)])),_:1},8,["label"]),n(c,{label:p(m)("Tester")},{default:u((()=>[v(b(p(h).tester),1)])),_:1},8,["label"]),n(c,{label:p(m)("Customer")},{default:u((()=>[v(b(p(h).customer),1)])),_:1},8,["label"]),n(c,{label:p(m)("Equipment")},{default:u((()=>[v(b(p(h).equipment),1)])),_:1},8,["label"]),n(c,{label:p(m)("System")},{default:u((()=>[v(b(p(h).system),1)])),_:1},8,["label"])])),_:1}),n(r,{column:"1",border:""},{default:u((()=>[n(c,{label:p(m)("Purpose")},{default:u((()=>[v(b(p(h).purpose),1)])),_:1},8,["label"]),n(c,{label:p(m)("Attached files")},{default:u((()=>[0===p(k).length?(a(),t("span",Re,b(p(m)("There is no file attached")),1)):(a(),t("span",Te,[(a(!0),t(y,null,_(p(k),((e,l)=>(a(),t("div",{key:l,class:"attachedFiles-container"},[w("a",{class:"ce-link",href:f+e.fileName,download:p(s)+"_attachment_"+e.originalName,target:"_blank"},[w("div",Ae,[n(p($),{class:"mr-1"}),v(" "+b(e.originalName),1)]),-1!==g.indexOf(e.ext.toLowerCase())?(a(),t("div",Ne,[w("img",{src:`${f}/${e.fileName}`},null,8,je)])):d("v-if",!0)],8,qe)])))),128))]))])),_:1},8,["label"])])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-5e75f9a4"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/ScopeBlock.vue"]]),Pe=e=>(x("data-v-3c7ba831"),e=e(),I(),e),Ue={class:"detail-collapse"},Be={key:0,class:"schedule-container"},Fe=Pe((()=>w("h4",null,"IT start coding",-1))),xe=Pe((()=>w("br",null,null,-1))),Ie={class:"mt-2"},Se={class:"schedule-details rounded p-2 m-2"},De={class:"ce-blue-color ce-text-bold"},Oe=Pe((()=>w("br",null,null,-1))),Ve={class:"mt-2"},$e={class:"schedule-details"},Ee={key:0,class:"ce-blue-color ce-text-bold"},We={key:1},ze={class:"schedule-details"},Ke={class:"ce-blue-color ce-text-bold"},Le={class:"schedule-details"},Me=Pe((()=>w("div",null,"KPI:",-1))),Ye=Pe((()=>w("h4",null,"Done",-1))),Ge=e({__name:"ScheduleBlock",setup(e){const o={Proceeding:{size:"large",type:"primary",icon:F},Done:{size:"normal",type:"success",icon:K},Cancel:{size:"normal",color:"#999",icon:L},Reviewing:{size:"large",type:"warning",icon:F},Rejected:{size:"large",type:"warning",icon:F}},s=D(),r=i({}),h=i({});c((()=>{h.value=s.getTurnOnDate;const e=s.getSchedule;for(const[l,a]of Object.entries(e)){if(("release"===l||"monitor"===l)&&!e[l])break;r.value[l]=e[l]}}));const k=e=>parseInt(e,10)>0;return(e,i)=>{const s=l("font-awesome-icon"),c=l("el-card"),R=l("el-timeline-item"),T=l("el-timeline"),q=l("el-collapse-item");return a(),t(y,null,[d(" schedule block "),n(q,{name:"4"},{title:u((()=>[w("div",Ue,[n(s,{icon:"fa-solid fa-thumbtack"}),v(" "+b(p(m)("Schedule")),1)])])),default:u((()=>[p(E)(p(r))?(a(),t("div",Be,[n(T,null,{default:u((()=>[d(" Turn on date "),n(R,{center:""},{default:u((()=>[n(c,null,{default:u((()=>[w("span",null,[Fe,w("h5",null,"("+b(p(m)("Owner"))+": "+b(p(h).owner)+")",1)]),xe,w("span",Ie,[w("div",Se,[w("div",null,b(p(m)("Turn on date"))+":",1),w("div",De,b(p(g)(p(h).date)),1)])])])),_:1})])),_:1}),d(" UAT1 ~ Monitor 1 lot "),(a(!0),t(y,null,_(p(r),((e,l)=>(a(),f(R,{key:l,size:o[e.state].size,icon:o[e.state].icon,type:o[e.state].type,color:o[e.state].color,center:""},{default:u((()=>[n(c,null,{default:u((()=>[w("span",null,[w("h4",null,b(e.title),1),w("h5",null,"("+b(p(m)("Owner"))+": "+b(e.owner)+")",1)]),Oe,w("span",Ve,[w("div",$e,[w("div",null,b(p(m)("Actual date"))+":",1),e.act?(a(),t("div",Ee,b(p(g)(e.act)),1)):(a(),t("div",We,b("Rejected"===e.state?`${p(m)("Rejected,")}\n${p(m)("re-uploading")}`:e.state),1))]),w("div",ze,[w("div",null,b(p(m)("Expect date"))+":",1),w("div",null,[(a(!0),t(y,null,_(e.exp.old,(e=>(a(),t("div",{key:e,class:"ce-line-through"},b(p(g)(e)),1)))),128)),w("div",Ke,b(p(g)(e.exp.new)),1)])]),w("div",Le,[Me,w("div",null,[v(b(p(m)("Rescheduling"))+": ",1),w("span",{class:B(k(e.KPI.reschedule)?"ce-red-color ce-text-bold":"")},b(e.KPI.reschedule),3)]),w("div",null,[v(b(p(m)("Delay"))+": ",1),w("span",{class:B(k(e.KPI.delay)?"ce-red-color ce-text-bold":"")},b(e.KPI.delay),3)])])])])),_:2},1024)])),_:2},1032,["size","icon","type","color"])))),128)),d(" Done "),n(R,{center:""},{default:u((()=>[n(c,null,{default:u((()=>[Ye])),_:1})])),_:1})])),_:1})])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-3c7ba831"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/ScheduleBlock.vue"]]),He={class:"detail-collapse"},Je={key:0},Qe={key:0,class:"ce-gray-color-italic"},Xe={key:1},Ze=["href","download"],el={key:0},ll=["src"],al=e({__name:"EvidenceBlock",setup(e){const o=D(),s=o.getReqNo,r=i({}),h=`https://it-req-node.onrender.com/uploads/${s}`,k=["jpg","jpeg","gif","png","svg"];return c((()=>{const e=o.getReqType,l=o.getEvidence;r.value=Object.assign({},l);for(const[a,t]of Object.entries(l)){const{uploadFiles:l,uploadReply:n}=t;if(("release"===a||"monitor"===a)&&"OneTime"===e)break;if(l.length&&l.forEach(((e,l)=>{let t=e.originalName.split(".").slice(-1)[0];r.value[a].uploadFiles[l].ext=t})),n)switch(n){case"Reviewing":r.value[a].state="Pending approval",r.value[a].class="ce-gray-color-italic";break;case"Rejected":r.value[a].state="Rejected, re-uploading",r.value[a].class="ce-gray-color-italic";break;case"Approved":r.value[a].state="Approved"}else r.value[a].state="Not uploaded yet",r.value[a].class="ce-gray-color-italic";switch(a){case"UAT1":r.value[a].title="IT buyoff (UAT1)";break;case"UAT2":r.value[a].title="User buyoff (UAT2)";break;case"release":r.value[a].title="Release";break;case"monitor":r.value[a].title="Monitor 1 lot"}}})),(e,i)=>{const o=l("font-awesome-icon"),s=l("el-tag"),c=l("el-descriptions-item"),R=l("el-descriptions"),T=l("el-collapse-item");return a(),t(y,null,[d(" evidence block "),n(T,{name:"5"},{title:u((()=>[w("div",He,[n(o,{icon:"fa-solid fa-thumbtack"}),v(" "+b(p(m)("Evidence")),1)])])),default:u((()=>[p(E)(p(r))?(a(),t("div",Je,[(a(!0),t(y,null,_(p(r),((e,l)=>(a(),f(R,{key:l,column:"1",border:""},U({default:u((()=>[e.state?(a(),f(c,{key:0,label:p(m)("Status")},{default:u((()=>["Approved"===e.state?(a(),f(s,{key:0,type:"primary"},{default:u((()=>[v(b(p(m)("Approved")),1)])),_:1})):(a(),t("span",{key:1,class:B(e.class)},b(p(m)(e.state)),3))])),_:2},1032,["label"])):d("v-if",!0),"Rejected"===e.uploadReply?(a(),f(c,{key:1,label:p(m)("Rejection message")},{default:u((()=>[e.comments?(a(),t("span",Xe,b(e.comments),1)):(a(),t("span",Qe,b(p(m)("There is no comments")),1))])),_:2},1032,["label"])):d("v-if",!0),e.uploadReply&&"Reviewing"!==e.uploadReply?(a(),f(c,{key:2,label:p(m)("Last review date")},{default:u((()=>[v(b(p(g)(e.reviewDate)),1)])),_:2},1032,["label"])):d("v-if",!0),e.uploadFiles.length?(a(),f(c,{key:3,label:p(m)("Last update date")},{default:u((()=>[v(b(p(g)(e.updateDate)),1)])),_:2},1032,["label"])):d("v-if",!0),e.uploadFiles.length?(a(),f(c,{key:4,label:p(m)("Evidence")},{default:u((()=>[(a(!0),t(y,null,_(e.uploadFiles,((e,i)=>(a(),t("div",{key:i,class:"evidence-container"},[w("a",{class:"ce-link",href:`${h}/${l}/${e.fileName}`,download:e.originalName,target:"_blank"},[w("div",null,[n(p($),{class:"mr-1"}),v(" "+b(e.originalName),1)]),-1!==k.indexOf(e.ext.toLowerCase())?(a(),t("div",el,[w("img",{src:`${h}/${l}/${e.fileName}`},null,8,ll)])):d("v-if",!0)],8,Ze)])))),128))])),_:2},1032,["label"])):d("v-if",!0)])),_:2},[e.title?{name:"title",fn:u((()=>[w("div",null,[n(o,{icon:"fa-solid fa-paperclip"}),v(" "+b(e.title),1)])])),key:"0"}:void 0]),1024)))),128))])):d("v-if",!0)])),_:1})],2112)}}},[["__scopeId","data-v-f4c0571e"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/EvidenceBlock.vue"]]),tl={class:"detail-collapse"},nl={key:0,class:"ce-gray-color-italic"},il={key:1},ol={key:0,class:"ce-gray-color-italic"},sl={key:1},cl=e({__name:"CancelBlock",setup(e){const o=D(),s=i({}),r={Approved:"primary",Rejected:"info",Reviewing:"warning"};return c((()=>{s.value=o.getCancellation?o.getCancellation:{}})),(e,i)=>{const o=l("font-awesome-icon"),c=l("el-descriptions-item"),_=l("el-tag"),h=l("el-descriptions"),k=l("el-collapse-item");return a(),t(y,null,[d(" cancellation block "),p(E)(p(s))?(a(),f(k,{key:0,name:"2"},{title:u((()=>[w("div",tl,[n(o,{icon:"fa-solid fa-thumbtack"}),v(" "+b(p(m)("Cancellation")),1)])])),default:u((()=>[w("div",null,[n(h,{column:"2",border:""},{default:u((()=>[n(c,{label:p(m)("Application date")},{default:u((()=>[v(b(p(g)(p(s).applyDate)),1)])),_:1},8,["label"]),n(c,{label:p(m)("Applicant")},{default:u((()=>[v(b(p(s).applicantName),1)])),_:1},8,["label"]),n(c,{label:p(m)("Reason")},{default:u((()=>[p(s).reason&&""!==p(s).reason?(a(),t("span",il,b(p(s).reason),1)):(a(),t("span",nl,b(p(m)("There is no reason")),1))])),_:1},8,["label"]),n(c,{label:p(m)("Status")},{default:u((()=>[n(_,{type:r[p(s).result]},{default:u((()=>[v(b(p(m)(p(s).result)),1)])),_:1},8,["type"])])),_:1},8,["label"]),p(s).reviewDate?(a(),f(c,{key:0,label:p(m)("Review date")},{default:u((()=>[v(b(p(g)(p(s).reviewDate)),1)])),_:1},8,["label"])):d("v-if",!0),"Rejected"===p(s).result?(a(),f(c,{key:1,label:p(m)("Rejection message")},{default:u((()=>[p(s).comments&&""!==p(s).comments?(a(),t("span",sl,b(p(s).comments),1)):(a(),t("span",ol,b(p(m)("There is no comments")),1))])),_:1},8,["label"])):d("v-if",!0)])),_:1})])])),_:1})):d("v-if",!0)],2112)}}},[["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/components/CancelBlock.vue"]]),rl={key:1,class:"ce-main-container"},dl=e({__name:"index",setup(e){const o=s().params.reqNo,r=D(),m=i(""),v=["Reviewing","Rejected","Returned"],b=i(!1),g=i(["1","2","3","4","5"]);return c((async()=>{b.value=!0,r.setReqNo(o),await r.getITReqInfo(),m.value=r.getReqStatus,setTimeout((()=>b.value=!1),1500)})),(e,i)=>{const o=l("el-collapse");return a(),t("div",null,[n(p(S),{loading:p(b)},null,8,["loading"]),d(" top title & functional buttons "),p(b)?d("v-if",!0):(a(),f(p(pe),{key:0})),d(" content "),p(b)?d("v-if",!0):(a(),t("div",rl,[n(o,{modelValue:p(g),"onUpdate:modelValue":i[0]||(i[0]=e=>h(g)?g.value=e:null)},{default:u((()=>[n(p(we)),n(p(cl)),n(p(Ce)),v.includes(p(m))?d("v-if",!0):(a(),f(p(Ge),{key:0})),v.includes(p(m))?d("v-if",!0):(a(),f(p(al),{key:1}))])),_:1},8,["modelValue"])]))])}}},[["__scopeId","data-v-3316eea4"],["__file","C:/Program Files/Workspace/it-req-fe/src/views/detail/index.vue"]]);export{dl as default};
